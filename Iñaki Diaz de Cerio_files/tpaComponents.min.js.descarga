define("tpaComponents",["lodash","coreUtils","santa-components","componentsCore","prop-types","skins","zepto","utils","reactDOM","warmupUtils","coreUtilsLib","santaProps","compUtils","create-react-class","react"],function(e,t,i,n,s,r,a,o,p,c,l,d,u,h,g){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1821)}({0:function(t,i){t.exports=e},1:function(e,i){e.exports=t},10:function(e,t){e.exports=o},11:function(e,t){e.exports=p},129:function(e,t,i){var n,s;n=[i(9),i(3),i(4),i(0),i(11),i(2),i(16),i(13),i(547),i(548),i(320),i(89),i(549),i(550)],void 0===(s=function(e,t,i,n,s,r,a,o,p,c,l,d,u,h){"use strict";var g=r.santaTypesDefinitions,m=o.tpaWarmup,f={mobile:"unavailableInMobile",https:"unavailableInHttps"},y="notInClientSpecMap",v="unresponsive",S="preloader",I=function(e,t){var i={charCode:e.charCode,keyCode:e.keyCode};this.sendPostMessage({intent:"addEventListener",eventType:t,params:i})},T=function(e){return!e.rootId||n.includes(e.getRootIdsWhichShouldBeRendered(),e.rootId)},D=function(e){var t=e.getClientSpecMapEntry(e.compData.applicationId);return n.includes(p.PERMITTED_FULL_SCREEN_TPAS_IN_MOBILE,n.get(t,"appDefinitionId"))};return{propTypes:{pageStub:g.Component.pageStub,isMobileView:r.santaTypesDefinitions.isMobileView,isViewerMode:r.santaTypesDefinitions.isViewerMode,currentUrl:r.santaTypesDefinitions.currentUrl.isRequired,compData:r.santaTypesDefinitions.Component.compData.isRequired,style:r.santaTypesDefinitions.Component.style.isRequired,id:r.santaTypesDefinitions.Component.id.isRequired,isClientAfterSSR:r.santaTypesDefinitions.isClientAfterSSR,getMemberDetails:r.santaTypesDefinitions.SiteMembersSantaTypes.getMemberDetails.isRequired,windowResizeEvent:r.santaTypesDefinitions.SiteAspects.windowResizeEvent.isRequired,reportBI:r.santaTypesDefinitions.reportBI.isRequired,biData:r.santaTypesDefinitions.biData.isRequired,compProp:r.santaTypesDefinitions.Component.compProp,primaryPageId:r.santaTypesDefinitions.primaryPageId.isRequired,getRootIdsWhichShouldBeRendered:r.santaTypesDefinitions.getRootIdsWhichShouldBeRendered,reportBeatEvent:r.santaTypesDefinitions.reportBeatEvent.isRequired,santaBase:r.santaTypesDefinitions.santaBase.isRequired,getClientSpecMapEntry:r.santaTypesDefinitions.getClientSpecMapEntry.isRequired,dynamicClientSpecMapAspect:r.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired,clientSpecMap:r.santaTypesDefinitions.RendererModel.clientSpecMap.isRequired,languageCode:r.santaTypesDefinitions.RendererModel.languageCode,pageId:r.santaTypesDefinitions.Component.pageId,rootId:r.santaTypesDefinitions.Component.rootId,structure:r.santaTypesDefinitions.Component.structure,tpaComponentsDomAspect:r.santaTypesDefinitions.SiteAspects.tpaComponentsDomAspect.isRequired,isHorizontallyDocked:g.Component.isHorizontallyDocked,isTpaRenderedInSsr:r.santaTypesDefinitions.isTpaRenderedInSsr,isExperimentOpen:r.santaTypesDefinitions.isExperimentOpen,getExistingRootNavigationInfo:r.santaTypesDefinitions.getExistingRootNavigationInfo.isRequired,currentUrlPageId:r.santaTypesDefinitions.Component.currentUrlPageId.isRequired,registerTpaComp:r.santaTypesDefinitions.TPA.registerTpaComp},mixins:[t.mixins.createChildComponentMixin,h],ALIVE_TIMEOUT:2e4,OVERLAY_GRACE:5e3,statics:{compSpecificIsDomOnlyOverride:function(){return!1}},getCompMinHeight:function(e){if(this.isUnderMobileView()){var t=e.getClientSpecMapEntry(e.compData.applicationId),i=this.getAppData(),s=this.getWidgetId(i),r=n.get(t,"widgets."+s+".componentFields.minHeightInMobile");return r&&n.isNumber(r)?r:void 0}},onKeyDown:function(e){T(this.props)&&I.call(this,e,"KEY_DOWN")},onKeyUp:function(e){T(this.props)&&I.call(this,e,"KEY_UP")},isUnderMobileView:function(){return this.props.isMobileView},getEcomParams:function(){return"1380b703-ce81-ff05-f115-39571d94dfcd"===this.getAppData().appDefinitionId&&this.props.currentUrl.query["ecom-tpa-params"]},_createOverlayChildComponent:function(e,t,i,s){return s=s||{},this.createChildComponent(n.merge(s,{id:i,style:this.props.style,overlay:t,applicationId:this.props.compData.applicationId,hideOverlayFunc:this._hideOverlay,reloadFunc:this._reload,compData:this.props.compData,languageCode:this.props.languageCode,santaBase:this.props.santaBase,getClientSpecMapEntry:this.props.getClientSpecMapEntry}),e,i,{})},_hideOverlay:function(){this.setState({showOverlay:!1})},_getUnresponsiveText:function(){return this.isUnderMobileView()?"Can't see the content? ":"To view this content, click "},_getReloadext:function(){return this.isUnderMobileView()?"Tap to reload.":"reload."},_createOverlay:function(e){if(!e)return null;switch(e){case S:return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAPreloaderOverlay",e,"preloaderOverlay");case v:var t={text:this._getUnresponsiveText(),reload:this._getReloadext()};return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",e,"unavailableMessageOverlay",t);case f.https:return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",e,"unavailableMessageOverlay",{text:"We're sorry, this content cannot be displayed."});case f.mobile:return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",e,"unavailableMessageOverlay",{text:"We're sorry, this content is currently not optimized for mobile view."});case y:return this._createOverlayChildComponent("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",e,"unavailableMessageOverlay");default:return null}},_getWidgetName:function(){var e=n.get(this.props.compData,"widgetId"),t=this.getAppData(),i=e?n.get(t.widgets,e):l.getMainSectionWidgetData(t);return n.get(i,"appPage.name")||t.appDefinitionName},getRootStyle:function(e){var t="hidden"===this.state.visibility?{visibility:this.state.visibility}:{},i=this.getCompMinHeight(this.props);return n.assign({minHeight:i?Math.max(i,e.height):e.height,minWidth:e.width},t,e)},getCompRootStyle:function(e){if(e=n.clone(e),this.isUnderMobileView()){if(this.state.isMobileFullScreenMode)return{display:"block"};if(D(this.props))return{display:"none"}}return this.state&&!n.isUndefined(this.state.height)&&(e.height=this.state.height),this.state&&!n.isUndefined(this.state.width)&&(e.width=this.state.width),this.state&&(this.state.isAlive||this.state.overlay===S||this.state.overlay===v||this.state.overlay===f.mobile)&&(this.state.visibility="visible"),this.state.ignoreAnchors?e.zIndex=1001:e.zIndex="",e=this.getRootStyle(e),this.props.isHorizontallyDocked&&(e=n.omit(e,["width","minWidth"])),e},shouldRenderIframe:function(){var e=this.state.overlay,t=!n.includes(f,e),i=this.state.overlay===v,s=t&&!i&&this.isCompInClientSpecMap();return s},allowScrolling:function(){var e=l.isFullPage(this.props.compData,this.getAppData()),t=l.isFullPageDesktopOnly(this.props.compData,this.getAppData())&&!this.props.isMobileView;return e||t?"yes":"no"},_getIframeProperties:function(){if(!this.shouldRenderIframe())return null;var e=this._shouldShowIframe(this.state),t=this.buildUrl(this.getBaseUrl()),i=this._getWidgetName(),s={"data-src":t,key:t,scrolling:this.allowScrolling(),frameBorder:"0",allow:d.getIFramePermissions(),allowtransparency:"true",allowFullScreen:!0,name:this.props.id,style:{display:e?"block":"none",width:"100%",height:"100%",overflow:"hidden",position:"absolute"},title:i,"aria-label":i};return d.isTPASection(this)&&this.isTPASupportedInSSRWarmup()&&this.props.isExperimentOpen("sv_ssrBufferEvents")&&(n.unset(s,"data-src"),s.src=t),s},getSkinProperties:function(){var e=this._createOverlay(this.state.overlay),t=this._getIframeProperties(),i={"":{style:this.getCompRootStyle(this.props.style),"data-ignore-anchors":this.state.ignoreAnchors},overlay:this.state.showOverlay&&this.isNotWorker()?e:null,iframe:t||"remove"};return this.checkIfNeedToSendMemberData(),this.mutateSkinProperties&&(i=this.mutateSkinProperties(i)),i},_reload:function(){var e=this;this._clearAliveTimeout(),clearTimeout(this.showOverlyIntervalId),this.showOverlyIntervalId=setTimeout(function(){e._showOverlayIfNeeded()},this.OVERLAY_GRACE),this._appAliveTimeout=setTimeout(this._onAppAliveTimeoutExpires,this.ALIVE_TIMEOUT);var t=this.getAppData();this.props.reportBI(u.RELOAD_TPA_CLICK,{appDefinitionId:n.get(t,"appDefinitionId"),appName:n.get(t,"appDefinitionName")}),this.registerReLayout(),this.setState(this.getInitialState())},checkIfNeedToSendMemberData:function(){var e=this.state.shouldGetSiteMemberDetails;if(e){var t=this.props.getMemberDetails();t&&e.callback({authResponse:!0,data:t})}},isTPASupportedInSSRWarmup:function(){var e=this.getAppData();return this.props.isExperimentOpen("sv_ssrLoadTpa")&&m.isTpaSupported(e,this.getWidgetId(e),this.props.isExperimentOpen,null)},getInitialState:function(){var e=void 0;this.isNotWorker()||(e={widgetName:"worker"}),this.reportPerformanceBiEvent(m.events.APP_IFRAME_START_LOADING,e),this.urlState="";var t={visibility:"hidden",overlay:this.isUnderMobileView()&&this.isMobileReady&&!this.isMobileReady()?f.mobile:null,isAlive:!1,registeredEvents:[],showOverlay:!0,initialWidth:this.props.style.width,initialHeight:this.props.style.height,initialInstance:this.props.dynamicClientSpecMapAspect.getAppInstance(this.props.compData.applicationId)||this.getAppData(this).instance,initialRouterData:n.get(this.props.getExistingRootNavigationInfo(this.props.currentUrlPageId),"routerPublicData")};return this.isTPASupportedInSSRWarmup()&&n.assign(t,{visibility:"visible",isAlive:!0}),this.shouldUpdateInitialRouterData=!0,this.mutateInitialState&&(t=this.mutateInitialState(t)),t},isCompInClientSpecMap:function(){var e=n.get(this.props,"clientSpecMap"),t=n.get(this.props,"compData.applicationId");return!(!e||!t)&&!!n.get(e,t)},_showOverlayIfNeeded:function(){var e=this.isCompInClientSpecMap(),t=n.get(this.props,"isViewerMode");this.state&&!1===this.state.isAlive&&(!this.state.overlay&&e||!e&&!t)&&this._isMounted&&this.setState({overlay:this._getInitialOverlay(),visibility:"visible"})},_shouldShowIframe:function(e){return!n.get(this.props,"compProp.isHidden")&&(!e.overlay||"preloader"===e.overlay)},_getInitialOverlay:function(){return this.isMobileReady&&this.isUnderMobileView()&&!this.isMobileReady()?f.mobile:this.isCompInClientSpecMap()?S:y},componentSpecificShouldUpdate:function(e){return!e.pageStub},componentWillReceiveProps:function(e){var t=n.get(this.props.getExistingRootNavigationInfo(e.currentUrlPageId),"routerPublicData");"masterPage"!==this.props.rootId||!this.shouldUpdateInitialRouterData||n.isUndefined(t)||n.isEqual(this.state.initialRouterData,t)||(this.setState({initialRouterData:t}),this.shouldUpdateInitialRouterData=!1),this.resize&&this.resize(e);var i=n.get(this.props.clientSpecMap,[this.props.compData.applicationId,"instance"]),s=n.get(e.clientSpecMap,[this.props.compData.applicationId,"instance"]);i!==s&&this.setState({initialInstance:s})},componentWillMount:function(){this.props.windowResizeEvent.registerToResize(this),this.props.registerTpaComp(this)},componentDidMount:function(){var e=this;this._isMounted=!0;var t=this.state.overlay;this.isNotWorker()&&(this.showOverlyIntervalId=setTimeout(function(){e._showOverlayIfNeeded()},this.OVERLAY_GRACE),this.props.isViewerMode||this.setOverlayState&&this.setOverlayState()),this.state.isAlive||n.includes(f,t)||!this.isNotWorker()||(this._appAliveTimeout=setTimeout(this._onAppAliveTimeoutExpires,this.ALIVE_TIMEOUT),d.incAppCounter())},isNotWorker:function(){return!this.isTPAWorker||!this.isTPAWorker()},_onAppAliveTimeoutExpires:function(){this.showUnresponsiveOverlay()},showUnresponsiveOverlay:function(){this._isMounted&&!this.state.isAlive&&this.isCompInClientSpecMap()&&this.setState({overlay:v,visibility:"visible"},function(){this.reportBIAppNotResponsive()}.bind(this))},reportBIAppNotResponsive:function(){var e=this.props.compData.widgetId,t=this.getAppData(),i=e?n.get(t.widgets,e):l.getMainSectionWidgetData(t),s=this.props.biData,r={endpoint:n.get(i,"widgetUrl"),app_id:n.get(t,"appDefinitionId"),pageNo:s.getPageNumber(),totalLoadingTime:s.getTime().totalLoadingTime};this.props.reportBI(c.APP_IS_NOT_RESPONSIVE,r)},componentWillUnmount:function(){this._isMounted=!1,this._clearAliveTimeout(),clearTimeout(this.showOverlyIntervalId)},_clearAliveTimeout:function(){this._appAliveTimeout&&(window.clearTimeout(this._appAliveTimeout),this._appAliveTimeout=0,this.props&&d.decAppCounter(this.props.reportBeatEvent,this.props.primaryPageId))},setAppIsAlive:function(e){this.reportPerformanceBiEvent(m.events.APP_SDK_START_LOADING),this._clearAliveTimeout(),this.setState({isAlive:!0,overlay:this.state.overlay===S?null:this.state.overlay},function(){this.props.tpaComponentsDomAspect.markComponentIsAlive(this.props.id),e&&e()})},_isUrlSecure:function(e){return/^https/.test(e)},getWidgetId:function(e){var t=n.get(this.props,"compData.widgetId");if(!t){var i=l.getMainSectionWidgetData(e);t=n.get(i,"widgetId")}return t},reportPerformanceBiEvent:function(e,t){if(!this.props.isClientAfterSSR||!this.props.isTpaRenderedInSsr){var i=this.getAppData(),n=this.getWidgetId(i);m.reportPerformanceBiEvent(e,this.props.reportBI,this.props.biData,this.props.id,this.props.isTpaRenderedInSsr,i,n,t)}},enterFullScreen:function(e){D(this.props)&&this.setState({isMobileFullScreenMode:!0},e)},exitFullScreen:function(e){this.setState({isMobileFullScreenMode:!1},e)}}}.apply(t,n))||(e.exports=s)},13:function(e,t){e.exports=c},130:function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t=/^[0-9]+%$/;function i(i){return e.isNumber(i)&&i>=0||function(e){return t.test(e)}(i)}return{resizeWindow:function(e,t,n){var s=!1,r={};i(t)&&t!==this.state.height&&(r.height=t,s=!0),i(e)&&e!==this.state.width&&(r.width=e,s=!0),s&&(this.registerReLayout(),this.setState(r,n))}}}.apply(t,n))||(e.exports=s)},14:function(e,t){e.exports=l},16:function(e,t){e.exports=d},18:function(e,t){e.exports=u},1821:function(e,t,i){var n,s;n=[i(1822),i(1825),i(1827),i(1828),i(1829),i(1830),i(90),i(91),i(1831),i(1832),i(1834),i(1835),i(129),i(551),i(552),i(89),i(558),i(554),i(547),i(5),i(560),i(556),i(553),i(320),i(548),i(549),i(321)],void 0===(s=function(e,t,i,n,s,r,a,o,p,c,l,d,u,h,g,m,f,y,v,S,I,T,D,w,C,A,P){"use strict";return S.skinsMap.addBatch(I),{tpaWidgetNative:t,nativeCompRequireService:T,widget:e,section:i,multiSection:n,worker:s,gluedWidget:r,tpaMixins:{tpaUrlBuilder:a,tpaCompApi:o,tpaCompBase:u},common:{metaData:v,TPAUrlBuilder:h,TPABaseUrlBuilder:g,utils:m,supportedSiteEvents:P},services:{tpaPreviewEditorCommunicationService:f,pageService:D,clientSpecMapService:w},sitePages:y,bi:{errors:C,events:A}}}.apply(t,n))||(e.exports=s)},1822:function(e,t,i){var n,s;n=[i(0),i(3),i(2),i(14),i(129),i(90),i(91),i(555),i(130)],void 0===(s=function(e,t,i,n,s,r,a,o,p){"use strict";var c=t.compRegistrar,l={displayName:"TPAWidget",propTypes:{structure:i.santaTypesDefinitions.Component.structure.isRequired},mixins:[t.mixins.skinBasedComp,n.timersMixins.timeoutsMixin,s,r,a,o,p],mutateIframeUrlQueryParam:function(t){t.width=this.state.initialWidth;var i=this.props.structure.originCompId;return i&&!e.isEmpty(i)&&(t.originCompId=i),t}};return c.register("wysiwyg.viewer.components.tpapps.TPAWidget",l),l}.apply(t,n))||(e.exports=s)},1823:function(e){e.exports={SDK_SET_HEIGHT_ERROR:{errorCode:190,desc:"sdk - set height with a big number",severity:"error",params:{p1:"height"}},SDK_PUBSUB_PUBLISH_ERROR:{errorCode:191,desc:"sdk - pubSub: publish error. App not installed on site - cannot find appDefId",severity:"error"},SDK_NAVIGATION_TO_SECTION_ERROR:{errorCode:192,desc:"sdk - navigate to section failed",severity:"error",params:{p1:"appDefinitionName",p2:"sectionId"}},ECOM_MISSING_PAGES:{errorCode:300,desc:"missing ecom pages",severity:"error"},APP_IS_NOT_RESPONSIVE:{errorCode:302,desc:"monitoring apps that are down",severity:"error",params:{p1:"endpoint",p2:"app_id",p3:"pageNo",p4:"totalLoadingTime"}}}},1824:function(e){e.exports={JS_SDK_FUNCTION_CALL:{eventId:12,adapter:"sdk",src:11,sampleRatio:1e3,params:{visitor_id:"visitorUuid",ver:"sdkVersion",origin:"origin",function_name:"fnName",namespace:"namespace",app_id:"appId",instance_id:"instanceId",is_published:"isPublished",count:"count",param:"param"}},GALLERY_FUNCTION_CALL:{eventId:11,adapter:"sdk",src:11,params:{visitor_id:"visitorUuid",sdk_ver:"sdkVersion",origin:"origin",function_name:"fnName",namespace:"namespace",count:"count"}},APP_STATE_CHANGED:{eventId:646,src:42,params:{widget_id:"widgetId",instance_id:"compId",appId:"appDefinitionId",loading_time:"loadingTime",pid:"pageId",pn:"pageNo",tts:"totalLoadingTime",external_app_id:"externalAppDefinitionId",external_widget_id:"externalWidgetId"}},RELOAD_TPA_CLICK:{eventId:321,src:42,params:{app_id:"appDefinitionId",appName:"appName"}},APP_IS_ALIVE_ERROR:{eventId:405,src:42,params:["app_id","errorMessage"]}}},1825:function(e,t,i){var n,s;function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n=[i(0),i(4),i(10),i(16),i(3),i(2),i(1826),i(20)],void 0===(s=function(e,t,i,n,s,a,o,p){"use strict";var c=s.compRegistrar,l=a.santaTypesDefinitions,d=a.utils.createReactElement,u={ReactComponent:l.NativeComponentSantaTypes.getComponent,getStyleData:l.Component.getStyleData,themeData:l.Theme.THEME_DATA,scriptsLocationMap:l.ServiceTopology.scriptsLocationMap,styleData:l.NativeComponentSantaTypes.widgetStyle,structure:a.santaTypesDefinitions.Component.structure.isRequired,layout:l.Component.layout,getClientSpecMapEntry:a.santaTypesDefinitions.getClientSpecMapEntry,compData:l.Component.compData,viewMode:l.NativeComponentSantaTypes.viewMode},h={ReactComponent:l.NativeComponentSantaTypes.getComponent,id:a.santaTypesDefinitions.Component.id,structure:a.santaTypesDefinitions.Component.structure,style:l.Component.style,widgetStyle:l.NativeComponentSantaTypes.widgetStyle,styleId:l.Component.styleId,compActions:l.Component.compActions,compData:l.Component.compData,handleAction:l.Behaviors.handleAction,formFactor:l.NativeComponentSantaTypes.formFactor,viewMode:l.NativeComponentSantaTypes.viewMode,defaultContentArea:l.Container.defaultContentArea,getStyleData:l.Component.getStyleData,getClientSpecMapEntry:a.santaTypesDefinitions.getClientSpecMapEntry,appLoadBI:l.NativeComponentSantaTypes.appLoadBI,isInSSR:a.santaTypesDefinitions.isInSSR,skin:n.Types.staticValue(t.string,"wysiwyg.viewer.skins.TPAWidgetNativeSkin"),windowScrollEvent:a.santaTypesDefinitions.SiteAspects.windowScrollEvent,loadFonts:l.NativeComponentSantaTypes.loadFonts,pageId:l.Component.pageId};function g(t,i){var n=i.styleData,s=i.layout,a=i.ReactComponent,o=i.styleId;return e.get(a,"css")&&e.isFunction(a.css)?r({},o,a.css({styleId:o,styleData:n,layout:s})):r({},o,"")}function m(t,i){return e.reduce(t,function(t,n,s){var r=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return i(n,{payload:JSON.stringify(t)})};return function(t){return e.includes(t,".")}(s)?e.set(t,s,r):(t[s]=r,t)},{})}g.cssTypes=u;var f=p({mixins:[s.mixins.customSkinBasedComp({customCssFunc:g})],propTypes:h,getInitialState:function(){return{scrollSubscribers:[],didLayoutSubscribers:[],raven:i.integrations.ravenUtils.createNewInstance()}},getCompProps:function(){var t=e.get(this.props,"compData.wixCodeProps"),i=m(this.props.compActions,this.props.handleAction),n={style:this.props.widgetStyle,id:this.props.id,viewMode:this.props.viewMode,formFactor:this.props.formFactor,dimensions:this.props.style,appLoadBI:this.props.appLoadBI,registerToScroll:this.registerToScroll,registerToComponentDidLayout:this.registerToComponentDidLayout,loadFonts:this.props.loadFonts,raven:this.state.raven,styleId:this.props.styleId,pageId:this.props.pageId};return e.merge(n,t,i)},registerToScroll:function(e){this.props.windowScrollEvent.registerToScroll(this),this.state.scrollSubscribers.push(e)},registerToComponentDidLayout:function(e){this.state.didLayoutSubscribers.push(e)},componentDidLayout:function(){this.state.didLayoutSubscribers.forEach(function(e){return e()})},onScroll:function(e){this.state.scrollSubscribers.forEach(function(t){return t(e)})},componentWillUnmount:function(){this.props.windowScrollEvent.unregisterToScroll(this)},getRootProperties:function(e){return{style:{height:"auto",minHeight:this.props.structure.layout.height},"data-min-height":this.props.structure.layout.height,children:d(e,this.getCompProps())}},getDeadCompProperties:function(){return this.props.isInSSR?{children:null}:{children:"To view this content, Reload the page",style:{textAlign:"center",backgroundColor:"#fff",fontSize:"14px"}}},getSkinProperties:function(){var e=this.props.ReactComponent;return{"":e?this.getRootProperties(e):this.getDeadCompProperties()}}});return c.register("wysiwyg.viewer.components.tpapps.TPAWidgetNative",f),s.dataRequirementsCheckerRegistrar.registerCheckerForCompType("wysiwyg.viewer.components.tpapps.TPAWidgetNative",o.requireAndRegisterComponent),f}.apply(t,n))||(e.exports=s)},1826:function(e,t,i){var n,s;n=[i(0),i(556),i(320)],void 0===(s=function(e,t,i){"use strict";return{requireAndRegisterComponent:function(n,s){var r=n.nativeComponentRegistrar,a=s.data,o=a.widgetId,p=a.applicationId;if(r.isRegistered(o))return[];var c=i.getNativeComponentUrl(n,p,o);if(!c)return[];var l={customDownload:function(){var i=l.done;t.requireComponentFromUrl(c).then(function(t){var n=e.get(t,"default.component",!1);n?r.register({widgetId:o,component:n}):r.register({widgetId:o,error:!0}),i()}).catch(function(){r.register({widgetId:o,error:!0}),i()})}};return[l]}}}.apply(t,n))||(e.exports=s)},1827:function(e,t,i){var n,s;n=[i(0),i(3),i(2),i(14),i(129),i(90),i(91),i(557),i(130)],void 0===(s=function(e,t,i,n,s,r,a,o,p){"use strict";var c=t.compRegistrar,l={displayName:"TPASection",propTypes:{compData:i.santaTypesDefinitions.Component.compData.isRequired},mixins:[t.mixins.skinBasedComp,n.timersMixins.timeoutsMixin,s,r,a,o,p],getBaseUrl:function(){var t=this.getAppData(),i=this.props.compData.widgetId,n=t.sectionUrl,s=t.sectionDefaultPage,r=this.props.compData.type,a=this.isUnderMobileView()&&this.isMobileReady();if("TPAWidget"===r&&i){var o=e.find(t.widgets,{widgetId:i});o&&(s=o.appPage.defaultPage,n=a?o.mobileUrl:o.widgetUrl)}else a&&(n=t.sectionMobileUrl);return s&&!e.isEmpty(s)&&("/"!==n.slice(-1)&&(n+="/"),n+=s),n}};return c.register("wysiwyg.viewer.components.tpapps.TPASection",l),l}.apply(t,n))||(e.exports=s)},1828:function(e,t,i){var n,s;n=[i(0),i(2),i(14),i(129),i(90),i(91),i(557),i(130),i(3)],void 0===(s=function(e,t,i,n,s,r,a,o,p){"use strict";var c=p.compRegistrar,l={displayName:"TPAMultiSection",propTypes:{compData:t.santaTypesDefinitions.Component.compData.isRequired},mixins:[p.mixins.skinBasedComp,i.timersMixins.timeoutsMixin,n,s,r,a,o],getBaseUrl:function(){var t=this.getAppData(),i=t.sectionUrl,n=t.widgets[this.props.compData.widgetId],s=t.sectionDefaultPage;return n&&(i=this.isUnderMobileView()&&this.isMobileReady()?n.mobileUrl:n.widgetUrl,s=n.appPage.defaultPage),s&&!e.isEmpty(s)&&("/"!==i.slice(-1)&&(i+="/"),i+=s),i}};return c.register("wysiwyg.viewer.components.tpapps.TPAMultiSection",l),l}.apply(t,n))||(e.exports=s)},1829:function(e,t,i){var n,s;n=[i(129),i(90),i(91),i(3)],void 0===(s=function(e,t,i,n){"use strict";var s=n.compRegistrar,r={displayName:"TPAWorker",mixins:[n.mixins.skinBasedComp,e,t,i],getBaseUrl:function(){return this.getAppData().appWorkerUrl},mutateIframeUrlQueryParam:function(e){return e.endpointType="worker",e},mutateSkinProperties:function(e){return e.iframe&&e.iframe.style&&(e.iframe.style.display="none"),e},isTPAWorker:function(){return!0}};s.register("tpa.viewer.classes.TPAWorker",r)}.apply(t,n))||(e.exports=s)},1830:function(e,t,i){var n,s;n=[i(14),i(3),i(16),i(2),i(129),i(90),i(91),i(555),i(130)],void 0===(s=function(e,t,i,n,s,r,a,o,p){"use strict";var c=t.compRegistrar,l={displayName:"TPAGluedWidget",statics:{behaviors:{notifyWidget:{methodName:"notifyWidgetInternal",params:["action"]}}},mixins:[t.mixins.skinBasedComp,e.timersMixins.timeoutsMixin,s,r,a,o,p],mutateIframeUrlQueryParam:function(e){return e.width=this.state.initialWidth,e},mutateSkinProperties:function(e){return e[""]["data-has-ads"]=this.props.shouldShowWixAds,e},notifyWidgetInternal:function(e){this.sendPostMessage({intent:"addEventListener",eventType:"QUICK_ACTION_TRIGGERED",params:{quickAction:e}})}};return c.register("wysiwyg.viewer.components.tpapps.TPAGluedWidget",l),l}.apply(t,n))||(e.exports=s)},1831:function(e,t,i){var n,s;n=[i(3)],void 0===(s=function(e){"use strict";var t=e.compRegistrar,i={mixins:[e.mixins.skinBasedComp],getSkinProperties:function(){return{preloader:{className:"circle-preloader"}}}};t.register("wysiwyg.viewer.components.tpapps.TPAPreloaderOverlay",i)}.apply(t,n))||(e.exports=s)},1832:function(e,t,i){var n,s;n=[i(2),i(21),i(16),i(1833),i(3)],void 0===(s=function(e,t,i,n,s){"use strict";var r=s.compRegistrar,a=Object.freeze({displayName:"TPAUnavailableMessageOverlay",mixins:[s.mixins.skinBasedComp,n],propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired},getInitialState:function(){return{showOverlay:!0}},getSkinProperties:function(){return{text:{children:[this.props.compData.text]},dismissButton:{onClick:this.props.compData.hideOverlayFunc},reloadButton:{children:[this.props.compData.reload],onClick:this.props.compData.reloadFunc},openHelp:this.openHelp}}});r.register("wysiwyg.viewer.components.tpapps.TPAUnavailableMessageOverlay",a)}.apply(t,n))||(e.exports=s)},1833:function(e,t,i){var n,s;n=[i(558)],void 0===(s=function(e){"use strict";return{openHelp:function(t){e.doPostMessage("openHelp",t)}}}.apply(t,n))||(e.exports=s)},1834:function(e,t,i){var n,s;n=[i(2),i(0),i(9),i(4),i(11),i(18),i(16),i(90),i(91),i(559),i(130),i(89),i(5),i(560),i(3)],void 0===(s=function(e,t,i,n,s,r,a,o,p,c,l,d,u,h,g){"use strict";var m=g.compRegistrar,f={displayName:"TPAModal",propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired,dynamicClientSpecMapAspect:e.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired,clientSpecMap:e.santaTypesDefinitions.RendererModel.clientSpecMap.isRequired,windowResizeEvent:e.santaTypesDefinitions.SiteAspects.windowResizeEvent.isRequired,siteScrollingBlocker:e.santaTypesDefinitions.SiteAspects.siteScrollingBlocker.isRequired,id:e.santaTypesDefinitions.Component.id.isRequired,isMobileView:e.santaTypesDefinitions.isMobileView.isRequired,removeModal:e.santaTypesDefinitions.TPA.removeModal.isRequired,exitFullScreenMode:e.santaTypesDefinitions.exitFullScreenMode.isRequired,onCloseCallback:n.func,windowKeyboardEvent:e.santaTypesDefinitions.SiteAspects.windowKeyboardEvent.isRequired,isViewerMode:e.santaTypesDefinitions.isViewerMode.isRequired,ios:e.santaTypesDefinitions.BrowserFlags.ios.isRequired,registerTpaComp:e.santaTypesDefinitions.TPA.registerTpaComp},mixins:[g.mixins.skinBasedComp,o,p,c,l,g.mixins.cyclicTabbingMixin],getInitialState:function(){return this.props.windowResizeEvent.registerToResize(this),{showComponent:!0,registeredEvents:[],initialInstance:this.props.dynamicClientSpecMapAspect.getAppInstance(this.props.compData.applicationId)||this.getAppData(this).instance,$displayDevice:this.getDeviceType(),windowSize:this.props.compData.windowSize}},componentWillMount:function(){this.props.registerTpaComp(this),this.props.windowKeyboardEvent&&this.props.windowKeyboardEvent.registerToEscapeKey(this),this.props.isViewerMode&&this.registerOnAnimationEnd(function(){var e=this.refs.dialog;e&&s.findDOMNode(e).focus(),this.unregisterOnAnimationEnd()})},componentDidMount:function(){if(this.props.isViewerMode){var e=s.findDOMNode(this.refs.dialog);e.contains(window.document.activeElement)||e.focus()}"mobile"===this.getDeviceType()&&this.props.siteScrollingBlocker.setSiteScrollingBlockedForModal(this,!0,this.props.ios())},componentWillUnmount:function(){this.props.windowKeyboardEvent&&this.props.windowKeyboardEvent.unRegisterKeys(this),"mobile"===this.getDeviceType()&&this.props.siteScrollingBlocker.setSiteScrollingBlockedForModal(this,!1,this.props.ios())},componentDidUpdate:function(e,t){"mobile"===this.getDeviceType()&&this.state.height>0&&t.height!==this.state.height&&this.props.siteScrollingBlocker.onHeightChanged(this.props.ios(),this.state.height)},componentWillReceiveProps:function(e){var i=t.get(this.props.clientSpecMap,[this.props.compData.applicationId,"instance"]),n=t.get(e.clientSpecMap,[this.props.compData.applicationId,"instance"]);i!==n&&this.setState({initialInstance:n})},getDefaultProperties:function(){return{"":{style:{position:"fixed",display:"block"},onKeyDown:this.preventTabbingOut},blockingLayer:{onClick:this.hide},frameWrap:{style:this.getIframeWrapperStyle()},dialog:{style:this.getDialogStyle(),"aria-label":this.props.compData.title||"Modal Dialog"},xButton:{children:"Ã—",onClick:this.hide,style:{display:"block"}},iframe:{"data-src":this.buildUrl(this.props.compData.url),frameBorder:"0",allow:d.getIFramePermissions(),allowtransparency:"true",allowFullScreen:!0,name:this.props.id}}},getHiddenProperties:function(){return{"":{style:{display:"none"}}}},getBareProperties:function(){return t.merge(this.getDefaultProperties(),{frameWrap:{style:{background:"transparent",border:"none"}},xButton:{style:{display:"none"}}},this.props.siteScrollingBlocker.getDeviceSpecificProperties("mobile"===this.getDeviceType(),this.props.ios(),this.state.height))},getSkinProperties:function(){if(this.state.showComponent)switch(this.props.compData.theme){case"BARE":case"LIGHT_BOX":return this.getBareProperties();default:return this.getDefaultProperties()}return this.getHiddenProperties()},getIframeWrapperStyle:function(){var e={};return this.props.isMobileView&&(e={WebkitOverflowScrolling:"touch",overflowY:"scroll"}),e},getDialogStyle:function(){if("mobile"===this.getDeviceType())return{pointerEvents:"auto"};var e=this.state.windowSize,i=t.isNumber(this.state.width)?this.state.width:this.props.compData.width,n=t.isNumber(this.state.height)?this.state.height:this.props.compData.height;if(i=Math.min(i,e.width),n=Math.min(n,e.height),!this.getAppData().isWixTPA){var s=e.width-50,r=e.height-50;i>=s&&n>=r&&(i=s,n=r)}return{width:i,height:n,marginTop:-n/2,marginLeft:-i/2}},mutateIframeUrlQueryParam:function(e){return e.origCompId=this.props.compData.origCompId,e.isInModal=!0,e},hide:function(e,i){var n=this;this.setState({showComponent:!1},function(){var s=e&&e.message?e:void 0;n.props.onCloseCallback&&n.props.onCloseCallback(s),"mobile"===n.state.$displayDevice&&n.props.exitFullScreenMode(),n.props.windowResizeEvent.unregisterToResize(n),n.props.removeModal(n),t.isFunction(i)&&i()})},isBareTheme:function(){return"BARE"===this.props.compData.theme},onResize:function(){var e=i(window);this.setState({windowSize:{width:e.width(),height:e.height()}})},onEscapeKey:function(){this.hide()}};return m.register("wysiwyg.viewer.components.tpapps.TPAModal",f),u.skinsMap.addBatch(h),f}.apply(t,n))||(e.exports=s)},1835:function(e,t,i){var n,s;n=[i(2),i(0),i(4),i(3),i(10),i(18),i(16),i(90),i(91),i(550),i(559),i(130),i(89)],void 0===(s=function(e,t,i,n,s,r,a,o,p,c,l,d,u){"use strict";var h=n.compRegistrar,g=function(e){return t.parseInt((e||"").toString().split("px")[0])},m="FIXED",f="ABSOLUTE",y="RELATIVE",v="DEFAULT",S="BOTTOM_CENTER",I="BOTTOM_LEFT",T="BOTTOM_RIGHT",D="CENTER",w="CENTER_LEFT",C="CENTER_RIGHT",A="TOP_CENTER",P="TOP_LEFT",E="TOP_RIGHT",b=function(e,t,i){return e+t/2-i/2},M=function(e,t,i){return e-(t+i)},_=function(e,t,i){return e-(t+i)},R=function(e,t,i){return e+t/2-i/2},x=function(e){var i=0,n="";if(t.isNumber(e))i=e;else if(t.isString(e)){var s=/(%)$/.exec(e),r=function(e){return/^([0-9]+)/.exec(e)}(e);i=r&&r[1]?parseInt(r[1],10):0,s&&s[1]&&(n=s[1])}return{size:i,unit:n}},O=function(e,i,n,s,r){var a={};return e.origin!==v&&e.origin!==m||(a=function(e,i,n,s){var r={position:"fixed",display:"block",width:n,height:s};return"%"===(s=x(s)).unit?s.size=t.min([s.size,100]):s.size>i.height&&(s.unit="%",s.size=100),(n=x(n)).size="%"===n.unit?t.min([n.size,100]):t.min([n.size,i.width]),e.placement===D?t.assign(r,{marginLeft:n.size/-2+(n.unit||"px"),marginTop:"%"===s.unit?0:s.size/-2+(s.unit||"px"),left:"50%",top:"%"===s.unit?0:"50%"}):e.placement===P?t.assign(r,{left:"0px",top:"0px"}):e.placement===E?t.assign(r,{right:"0px",top:"0px"}):e.placement===A?t.assign(r,{marginLeft:n.size/-2+(n.unit||"px"),top:"0px",left:"50%"}):e.placement===C?t.assign(r,{marginTop:"%"===s.unit?0:s.size/-2+(s.unit||"px"),top:"%"===s.unit?0:"50%",right:"0px"}):e.placement===w?t.assign(r,{marginTop:"%"===s.unit?0:s.size/-2+(s.unit||"px"),top:"%"===s.unit?0:"50%",left:"0px"}):e.placement===I?t.assign(r,{bottom:"0px",left:"0px"}):e.placement===T?t.assign(r,{bottom:"0px",right:"0px"}):e.placement===S&&t.assign(r,{marginLeft:n.size/-2+(n.unit||"px"),left:"50%",bottom:"0px"}),""===s.unit&&(s.unit="px"),""===n.unit&&(n.unit="px"),t.assign(r,{height:s.size+s.unit,width:n.size+n.unit}),r}(e,n,s,r)),e.origin===y&&(a=function(e,i,n,s,r){var a=void 0,o=void 0;return e.placement===D?(s=t.min([s,n.height]),r=t.min([r,n.width]),a=R(i.top,i.height,s),o=b(i.left,i.width,r)):e.placement===P?(s=t.min([s,i.top]),r=t.min([r,i.left]),a=i.top-s,o=i.left-r):e.placement===E?(s=t.min([s,i.top]),r=t.min([r,_(n.width,i.width,i.left)]),a=i.top-s,o=i.width+i.left):e.placement===A?(s=t.min([s,i.top]),r=t.min([r,n.width]),a=i.top-s,o=b(i.left,i.width,r)):e.placement===C?(s=t.min([s,n.height]),r=t.min([r,_(n.width,i.width,i.left)]),a=R(i.top,i.height,s),o=i.width+i.left):e.placement===w?(s=t.min([s,n.height]),r=t.min([r,i.left]),a=R(i.top,i.height,s),o=i.left-r):e.placement===I?(s=t.min([s,M(n.height,i.top,i.height)]),r=t.min([r,i.left]),a=i.top+i.height,o=i.left-r):e.placement===T?(s=t.min([s,M(n.height,i.top,i.height)]),r=t.min([r,_(n.width,i.width,i.left)]),a=i.top+i.height,o=i.width+i.left):e.placement===S&&(s=t.min([s,M(n.height,i.top,i.height)]),r=t.min([r,n.width]),a=i.top+i.height,o=b(i.left,i.width,r)),a=t.max([0,a]),o=t.max([0,o]),t.assign({position:"absolute",display:"block"},{top:a,left:o,width:r,height:s})}(e,i,n,r,s)),e.origin===f&&(a=function(e,i,n,s,r){var a=void 0,o=void 0,p=void 0,c=void 0;return e.placement===D?(p=t.min([i.actualTop+e.y,n.height-(i.actualTop+e.y)]),s=t.min([s,2*p]),c=t.min([i.actualLeft+e.x,n.width-(i.actualLeft+e.x)]),r=t.min([r,2*c]),a=i.top+e.y-s/2,o=i.left+e.x-r/2):e.placement===P?(s=t.min([s,i.actualTop+e.y]),r=t.min([r,i.actualLeft+e.x]),a=i.top+e.y-s,o=i.left+e.x-r):e.placement===E?(s=t.min([s,i.actualTop+e.y]),r=t.min([r,n.width-(i.actualLeft+e.x)]),a=i.top+e.y-s,o=i.left+e.x):e.placement===A?(s=t.min([s,i.actualTop+e.y]),c=t.min([i.actualLeft+e.x,n.width-(i.actualLeft+e.x)]),r=t.min([r,2*c]),a=i.top+e.y-s,o=i.left+e.x-r/2):e.placement===C?(p=t.min([i.actualTop+e.y,n.height-(i.actualTop+e.y)]),s=t.min([s,2*p]),r=t.min([r,n.width-(i.actualLeft+e.x)]),a=i.top+e.y-s/2,o=i.left+e.x):e.placement===w?(p=t.min([i.actualTop+e.y,n.height-(i.actualTop+e.y)]),s=t.min([s,2*p]),r=t.min([r,i.actualLeft+e.x]),a=i.top+e.y-s/2,o=i.left+e.x-r):e.placement===I?(s=t.min([s,n.height-(i.actulaTop+e.y)]),r=t.min([r,i.actualLeft+e.x]),a=i.top+e.y,o=i.left+e.x-r):e.placement===T?(s=t.min([s,n.height-(i.actualTop+e.y)]),r=t.min([r,n.width-(i.actualLeft+e.x)]),a=i.top+e.y,o=i.left+e.x):e.placement===S&&(s=t.min([s,n.height-(i.actualTop+e.y)]),c=t.min([i.actualLeft+e.x,n.width-(i.actualLeft+e.x)]),r=t.min([r,2*c]),a=i.top+e.y,o=i.left+e.x-r/2),a=t.max([0,a]),o=t.max([0,o]),t.assign({position:"absolute",display:"block"},{top:a,left:o,width:r,height:s})}(e,i,n,r,s)),a=function(e,i,n,s){var r=g(s.width),a=g(s.height);if(r<10||a<10){var o=x(n);o.size="%"===o.unit?t.min([o.size,100]):t.min([o.size,e.height]);var p=x(i);return p.size="%"===p.unit?t.min([p.size,100]):t.min([p.size,e.width]),{position:"fixed",display:"block",width:p.size+(o.unit||"px"),height:o.size+(p.unit||"px"),marginLeft:p.size/-2+(o.unit||"px"),marginTop:o.size/-2+(p.unit||"px"),left:"50%",top:"50%"}}return s}(n,s,r,a)},U={displayName:"TPAPopup",mixins:[n.mixins.skinBasedComp,o,p,l,d,c],propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired,dynamicClientSpecMapAspect:e.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired,clientSpecMap:e.santaTypesDefinitions.RendererModel.clientSpecMap.isRequired,siteScrollingBlocker:e.santaTypesDefinitions.SiteAspects.siteScrollingBlocker.isRequired,id:e.santaTypesDefinitions.Component.id.isRequired,aspectData:e.santaTypesDefinitions.TPA.data.isRequired,onCloseCallback:i.func,removePopup:e.santaTypesDefinitions.TPA.removePopup.isRequired,isMobileView:e.santaTypesDefinitions.isMobileView.isRequired,registerTpaComp:e.santaTypesDefinitions.TPA.registerTpaComp},getInitialState:function(){return{showComponent:!0,initialInstance:this.props.dynamicClientSpecMapAspect.getAppInstance(this.props.compData.applicationId)||this.getAppData(this).instance,registeredEvents:[]}},getSkinProperties:function(){var e=this.state.showComponent?this.getSelfStyle():{display:"none"},t=this.isBareTheme()?"none":"block";return this.state.showComponent?{"":{style:e},closeButton:{onClick:this.hide,style:{display:t}},iframe:{"data-src":this.buildUrl(this.props.compData.url),scrolling:"no",frameBorder:"0",allow:u.getIFramePermissions(),allowtransparency:"true",allowFullScreen:!0,name:this.props.id}}:{"":{style:e}}},mutateIframeUrlQueryParam:function(e){return e.origCompId=this.props.compData.origCompId,e},getPopupWidth:function(){return t.isUndefined(this.state.width)?this.props.compData.width:this.state.width},getPopupHeight:function(){return t.isUndefined(this.state.height)?this.props.compData.height:this.state.height},getSelfStyle:function(){var e=t.defaults(this.props.compData.position,{x:0,y:0}),i=this.props.compData.origCompStyle,n=this.props.compData.windowSize,s=O(e,i,n,this.getPopupWidth(),this.getPopupHeight());return s.zIndex=this.props.aspectData.isModalOpen?1001:null,this.shouldDisableScroll=function(e,t,i){return"100%"===e&&("100%"===t||Number(g(t))>=i.width)}(s.height,s.width,n)&&this.props.isMobileView,this.getThemeStyle(s)},getThemeStyle:function(e){return this.isBareTheme()?t.merge(e,{background:"none",boxShadow:"none",borderRadius:0}):e},hide:function(e,i){var n=this;this.setState({showComponent:!1},function(){var s=e&&e.message?e:void 0;n.props.onCloseCallback&&n.props.onCloseCallback(s),this.props.removePopup(n),t.isFunction(i)&&i()})},isBareTheme:function(){return"BARE"===this.props.compData.theme},componentWillReceiveProps:function(e){var i=t.get(this.props.clientSpecMap,[this.props.compData.applicationId,"instance"]),n=t.get(e.clientSpecMap,[this.props.compData.applicationId,"instance"]);i!==n&&this.setState({initialInstance:n})},componentWillMount:function(){this.props.registerTpaComp(this)},componentDidMount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,this.shouldDisableScroll)},componentDidUpdate:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,this.shouldDisableScroll)},componentWillUnmount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,!1)}};return h.register("wysiwyg.viewer.components.tpapps.TPAPopup",U),U}.apply(t,n))||(e.exports=s)},2:function(e,t){e.exports=i},20:function(e,t){e.exports=h},21:function(e,t){e.exports=g},3:function(e,t){e.exports=n},320:function(e,t,i){var n,s,r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n=[i(0),i(1),i(89)],void 0===(s=function(e,t,i){"use strict";var n=t.clientSpecMapUtils.getMainSectionWidgetData,s=function(t,i,n){var s=t.getClientSpecMap()[i];if(s){var r=e.find(s.widgets,function(e){return e.appPage&&e.appPage.id===n});if(r)return r.shouldBeStretchedByDefaultMobile||r.appPage.landingPageInMobile||r.appPage.fullPage}return!1};function a(t,i,n){var s=i.widgetsUrlOverride.split(",").map(function(e){return e.split("=")}).map(function(e){var t=r(e,2);return{widgetIdOverride:t[0],urlOverride:t[1]}}).find(function(e){return e.widgetIdOverride===t});if(s)return function(t,i){return e.startsWith(t,i)||e.startsWith(t,"http://localhost")||e.startsWith(t,"https://localhost")}(s.urlOverride,n)?s.urlOverride:void console.error("URL override "+s.urlOverride+" is invalid. please use a URL served from "+n+" or localhost")}return{getAppDataByAppDefinitionId:function(t,i){var n=t.getClientSpecMap();return e.find(n,{appDefinitionId:i})},getMainSectionWidgetData:n,isSuperAppByCompId:function(t,n){var s=i.getAppData(t,n);return e.get(s,"isWixTPA")},isCurrentPageFullResponsive:function(e){return e.isMobileDevice()&&e.isMobileView()&&!!function(e){var t=e.getCurrentUrlPageId(),i=e.getDataByQuery(t);return!!(i&&"Page"===i.type&&i.tpaApplicationId>0)&&s(e,i.tpaApplicationId,i.tpaPageId)}(e)},getWidgetDataByTpaPageId:function(t,i){var n=e.get(t,"widgets");return e.find(n,function(t){return e.get(t,"appPage.id")===i})},isFullPage:function(t,i){if(i){var s=e.get(t,"widgetId"),r=s?e.get(i.widgets,s):n(i);return e.get(r,"appPage.fullPage",!1)}return!1},isFullPageDesktopOnly:function(t,i){if(i){var s=e.get(t,"widgetId"),r=s?e.get(i.widgets,s):n(i);return e.get(r,"componentFields.fullPageDesktopOnly",!1)}return!1},getNativeComponentUrl:function(t,i,n){var s=t.getClientSpecMap(),r=t.getQueryParams(),o=t.serviceTopology.scriptsDomainUrl;if(function(e){return e&&e.widgetsUrlOverride&&e.widgetsUrlOverride.includes("=")}(r)){var p=a(n,r,o);if(p)return p}var c=e.get(s[i].widgets[n],"componentFields.componentUrl");return c?e.endsWith(c,".js")?c:c+".js":null}}}.apply(t,n))||(e.exports=s)},321:function(e,t,i){var n;void 0===(n=function(){"use strict";return{SCROLL:"SCROLL",PAGE_NAVIGATION:"PAGE_NAVIGATION",PAGE_NAVIGATION_IN:"PAGE_NAVIGATION_IN",PAGE_NAVIGATION_OUT:"PAGE_NAVIGATION_OUT",PAGE_NAVIGATION_CHANGE:"PAGE_NAVIGATION_CHANGE",STATE_CHANGED:"STATE_CHANGED",SESSION_CHANGED:"SESSION_CHANGED",INSTANCE_CHANGED:"INSTANCE_CHANGED",MEMBER_DETAILS_UPDATED:"MEMBER_DETAILS_UPDATED",SITE_METADATA_CHANGED:"SITE_METADATA_CHANGED",KEY_DOWN:"KEY_DOWN",KEY_UP:"KEY_UP"}}.apply(t,[]))||(e.exports=n)},4:function(e,t){e.exports=s},5:function(e,t){e.exports=r},547:function(e,t,i){var n,s;n=[i(89)],void 0===(s=function(e){"use strict";var t,i,n,s="14517e1a-3ff0-af98-408e-2bd6953c36a2";return{PERF_CATEGORY:{category:"tpa"},PERMITTED_GLUED_TPAS_IN_MOBILE:[s],PERMITTED_FULL_SCREEN_TPAS_IN_MOBILE:[s],NATIVE_COMPONENT_WIDGETS_EXPERIMENT_MAP:(t={},i=e.Constants.ECOM.CART_ICON_WIDGET_ID,n="sv_nativeCartIcon",i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t)}}.apply(t,n))||(e.exports=s)},548:function(e,t,i){var n,s;n=[i(1823),i(0),i(1)],void 0===(s=function(e,t,i){"use strict";var n=i.loggingUtils.logger;return t.forEach(e,function(e,t){e.errorName=t}),n.register("tpa","error",e),e}.apply(t,n))||(e.exports=s)},549:function(e,t,i){var n,s;n=[i(1824),i(0),i(1)],void 0===(s=function(e,t,i){"use strict";return i.loggingUtils.logger.register("tpa","event",e),e}.apply(t,n))||(e.exports=s)},550:function(e,t,i){var n,s;n=[i(2),i(0),i(11)],void 0===(s=function(e,t,i){"use strict";var n={trailing:!0},s=function(){return t.throttle(function(e){if(a(this.props)){var i=function(e,i,n){var s=void 0,a={x:(s=r(e.props)?e._cachedBoundingClientRect:e._domNode.getBoundingClientRect()).left+(i.x||0),y:s.top+(i.y||0),width:s.width,height:s.height};a.scale=n,null===e.windowSize&&(e.windowSize=e.props.screenSize);var o={scrollTop:i.y,scrollLeft:i.x,documentHeight:e.props.screenSize.height,documentWidth:e.props.screenSize.width};return t.assign({},a,s,o)}(this,e,t.get(this,"props.siteScale",1));this.sendPostMessage({intent:"addEventListener",eventType:"SCROLL",params:i})}},250,n)};function r(e){return t.get(e,"structure.layout.fixedPosition")||!1}var a=function(e){return!e.rootId||t.includes(e.getRootIdsWhichShouldBeRendered(),e.rootId)};return{propTypes:{getRootIdsWhichShouldBeRendered:e.santaTypesDefinitions.getRootIdsWhichShouldBeRendered,siteScale:e.santaTypesDefinitions.RenderFlags.siteScale,rootId:e.santaTypesDefinitions.Component.rootId,screenSize:e.santaTypesDefinitions.screenSize.isRequired},onScroll:t.noop,getInitialState:function(){return this._domNode=null,this._cachedBoundingClientRect=null,{}},componentDidMount:function(){this._domNode=i.findDOMNode(this),r(this.props)&&(this._cachedBoundingClientRect=this._domNode.getBoundingClientRect())},onResize:function(){r(this.props)&&(this._cachedBoundingClientRect=this._domNode.getBoundingClientRect())},componentWillMount:function(){this._domNode=null,this.onScroll=s()},componentWillUpdate:function(e,t){var i=t.height!==this.state.height||t.width!==this.state.width;r(e)&&i&&(this._cachedBoundingClientRect=null)},componentDidUpdate:function(){null===this._cachedBoundingClientRect&&r(this.props)&&(this._cachedBoundingClientRect=this._domNode.getBoundingClientRect())}}}.apply(t,n))||(e.exports=s)},551:function(e,t,i){var n,s;n=[i(0),i(552)],void 0===(s=function(e,t){"use strict";var i=function(e){t.call(this,e)};return i.prototype=e.assign(new t,{addCacheKiller:function(e){return this.addQueryParam("cacheKiller",e)},addInstance:function(e){return this.addQueryParam("instance",e)},addWidth:function(e){return this.addQueryParam("width",e)},addLocale:function(e){return this.addQueryParam("locale",e)},addLang:function(e){return this.addQueryParam("lang",e)},addDateNumberFormat:function(e){return this.addQueryParam("dateNumberFormat",e)},addIsPrimaryLanguage:function(e){return this.addQueryParam("isPrimaryLanguage",e)},addCurrency:function(e){return this.addQueryParam("currency",e)},addTimeZone:function(e){return this.addQueryParam("tz",e)},addViewMode:function(e){return this.addQueryParam("viewMode",e)},addCompId:function(e){return this.addQueryParam("compId",e)},addDeviceType:function(e){return this.addQueryParam("deviceType",e)},addStandalone:function(e){return this.addQueryParam("standalone",e)},addEndpointType:function(e){return this.addQueryParam("endpointType",e)},addOrigCompId:function(e){return this.addQueryParam("origCompId",e)},addExternalId:function(e){return this.addQueryParam("externalId",e)},addOrigin:function(e){return this.addQueryParam("origin",e)},addPageId:function(e){return this.addQueryParam("pageId",e)},addHeight:function(e){return this.addQueryParam("height",e)},addViewerSessionId:function(e){return this.addQueryParam("vsi",e)},addCbi:function(e){return this.addQueryParam("cbi",e)},addRouterData:function(e,t){try{var i=void 0;return e&&(i=t("sv_tpaDecodeRouterData")?window.btoa(JSON.stringify(e)):JSON.stringify(e)).length<400?this.addQueryParam("routerData",i):this}catch(e){return this}}}),i}.apply(t,n))||(e.exports=s)},552:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i=function(e){this.url=t.urlUtils.parseUrl(e),this.url.query=this.url.query||{},this.url.search=null,this.url.hash=this.url.hash||""};return i.prototype={addQueryParam:function(t,i){var n=this.url.query;return i&&!e.isEmpty(i)&&(n[t]?e.isArray(n[t])?n[t].push(i):n[t]=[n[t],i]:n[t]=i),this},addMultipleQueryParams:function(t){return t&&!e.isEmpty(t)&&e.assign(this.url.query,t),this},addQueryParamsFromFunc:function(t,i){return e.isFunction(t)&&t.apply(null,[this].concat(i)),this},setHash:function(t){return e.isString(t)&&!e.isEmpty(t)&&(t="#"===t[0]?t:"#"+t,this.url.hash=t),this},mutateIframeSrc:function(e){return e&&(this.url=e(this.url)),this},filterQueryParams:function(t){return t&&!e.isEmpty(t)&&(this.url.query=e.pick(this.url.query,t)),this},build:function(){return t.urlUtils.buildFullUrl(this.url)}},i}.apply(t,n))||(e.exports=s)},553:function(e,t,i){var n,s;n=[i(0),i(554),i(1)],void 0===(s=function(e,t,i){"use strict";var n=new i.SiteDataPrivates;return{mapPageToWidgets:function(i){var s=i.getSiteData();n.has(s)||n.set(s,{});var r=n.get(s);if(e.size(r)>0)return r;var a=t.getSitePagesData(i.getSiteData());return e.forEach(a,function(t){if(t&&t.tpaApplicationId>0){var i={pageId:t.id,tpaId:t.tpaApplicationId,tpaPageId:t.tpaPageId};e.isUndefined(r[i.tpaId])&&(r[i.tpaId]=[]),r[i.tpaId].push(i)}}),r}}}.apply(t,n))||(e.exports=s)},554:function(e,t,i){var n,s;n=[i(0),i(1),i(89)],void 0===(s=function(e,t,i){"use strict";var n=function(i,n){n=n||{};var r=t.menuUtils.getSiteMenuWithoutRenderedLinks(i,!0);n.filterHideFromMenuPages&&(r=s(r,i.getClientSpecMap())),n.homePageId=i.getMainPageId();var o=l(r,i,n);return n.includeIsHomePage&&(o=p(o,n.homePageId)),n.includePagesUrl&&(o=a(i,o,e.get(n,"baseUrl"),n)),o},s=function(t,i){return e.filter(t,function(e){return!o(i,e.link)})};function r(e,i,n,s){return t.wixUrlParser.getUrl(e,{pageId:i,title:n},void 0,!0,s)}var a=function t(i,n,s){return e.map(n,function(e){var n=i.getDataByQuery(e.id,"masterPage");return n&&n.pageUriSEO&&(e.url=r(i,e.id,n.pageUriSEO,s)),e.subPages&&(e.subPages=t(i,e.subPages,s)),e})},o=function(t,n){if("PageLink"===e.get(n,"type")){var s=e.get(n,"pageId.tpaApplicationId"),r=e.get(n,"pageId.tpaPageId"),a=e.get(t,s);return i.isPageMarkedAsHideFromMenu(a,r)}return!1},p=function t(i,n){return e.map(i,function(e){return e.isHomepage=c(e,n),e.subPages&&(e.subPages=t(e.subPages,n)),e})},c=function(t,i){return!e.isUndefined(t)&&t.id===i},l=function(t,i,n){var s=[],r=n.enhancedInfo?h:d;return e.forEach(t,function(t){var a=r(t,i,n),o=t.items;e.forEach(o,function(e){var t=r(e,i,n);a.subPages=a.subPages||[],a.subPages.push(t)}),s.push(a)}),s},d=function(i){if(i.link){var n=e.get(i.link,"pageId.id");return{title:i.label||"",id:t.stringUtils.startsWith(n,"#")?n.substr(1):n,hide:!i.isVisible||!1}}return{}},u=function(i,n,s){var a=function(i){var n=e.get(i,"link.pageId.id");return n?t.stringUtils.startsWith(n,"#")?n.substr(1):n:""}(i),o=e.get(i,"link.pageId.pageUriSEO"),p={isHomePage:a===s.homePageId};return o&&(p.url=r(n,a,o,s.baseUrl)),p},h=function(i,n,s){var r=t.linkUtils.getRelevantLinkDataFromMenuItem(i);switch((r=e.merge(r,{type:r.type||"MenuHeader",title:i.label||"",hidden:!i.isVisible||!1})).type){case"PageLink":case"AnchorLink":r=e.merge(r,u(i,n,s));break;case"DocumentLink":r.url=t.linkUtils.getDocumentLink(i.link,n)}return r},g=function(e,t){return t.getDataByQuery(e,"masterPage")},m=function(t,i){var n=[];return e.forEach(t,function(t){e.forEach(t.subPages,function(e){n.push(g(e.id,i))}),n.push(g(t.id,i))}),n};return{getSitePagesInfoData:n,getSitePagesData:function(e){var t=n(e);return m(t,e)}}}.apply(t,n))||(e.exports=s)},555:function(e,t,i){var n,s;n=[i(2)],void 0===(s=function(e){"use strict";return{propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired},getBaseUrl:function(){var e=this.getAppData();if(e.widgets){var t=this.props.compData.widgetId,i=e.widgets[t];if(i){var n=this.isInMobileDevMode&&this.isInMobileDevMode();return this.isUnderMobileView()&&(i.mobileUrl&&(n||i.mobilePublished))?i.mobileUrl:i.widgetUrl}}return""}}}.apply(t,n))||(e.exports=s)},556:function(e,t,i){var n;void 0===(n=function(){"use strict";return{requireComponentFromUrl:function(e){return new Promise(function(t,i){return requirejs([e],t,i)})}}}.apply(t,[]))||(e.exports=n)},557:function(e,t,i){var n,s,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(2),i(0),i(321)],void 0===(s=function(e,t,i){"use strict";return{propTypes:{isExperimentOpen:e.santaTypesDefinitions.isExperimentOpen,getExistingRootNavigationInfo:e.santaTypesDefinitions.getExistingRootNavigationInfo,rootId:e.santaTypesDefinitions.Component.rootId.isRequired,pageUrlWithHash:e.santaTypesDefinitions.pageUrlWithHash.isRequired,pageId:e.santaTypesDefinitions.Component.pageId,compData:e.santaTypesDefinitions.Component.compData.isRequired,isViewerMode:e.santaTypesDefinitions.isViewerMode,currentUrlPageId:e.santaTypesDefinitions.Component.currentUrlPageId,dynamicClientSpecMapAspect:e.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired},isTPASection:!0,getSiteUrlStateFromProps:function(e){var t=e.getExistingRootNavigationInfo(e.rootId);return t&&t.tpaInnerRoute||""},getSiteUrlQueryParamsFromProps:function(e){var i=e.getExistingRootNavigationInfo(e.rootId),n=t.get(i,"queryParams.appSectionParams"),s={};if(n)try{s=JSON.parse(n)}catch(e){}return s},mutateSkinProperties:function(e){return"object"===r(e.iframe)&&(e.iframe.src?e.iframe.src=this.buildUrl(this.getBaseUrl()):e.iframe["data-src"]=this.buildUrl(this.getBaseUrl())),e},mutateInitialState:function(e){return e.sectionUrlState=this.getSiteUrlStateFromProps(this.props),e.sectionUrlParams=this.getSiteUrlQueryParamsFromProps(this.props),e.sectionUrl=this.fixSectionUrl(),e},fixSectionUrl:function(){var e=this.props.pageUrlWithHash;return this.endsWith(e,"/")?e:e+"/"},endsWith:function(e,i){return t.endsWith(e,i)},isViewerMode:function(){return"site"===this.getViewMode()},componentWillReceiveProps:function(e){var i=this.getSiteUrlStateFromProps(e),n=this.getSiteUrlQueryParamsFromProps(e);t.isUndefined(this.state.pushState)?e.currentUrlPageId===this.props.pageId&&(this.urlState!==i||this.shouldUpdateState)&&(this.urlState=i,this.shouldUpdateState=!1,this.setState({sectionUrlState:i}),this.props.isExperimentOpen("sv_tpaStateChangedEvent")&&this.reportStateChanged(this.urlState)):(this.urlState=this.state.pushState,this.setState({pushState:void 0}),this.props.isExperimentOpen("sv_tpaStateChangedEvent")&&this.reportStateChanged(this.urlState)),e.currentUrlPageId===this.props.pageId&&this.state.sectionUrlParams!==n&&this.setState({sectionUrlParams:n}),this.props.isExperimentOpen("sv_tpaStateChangedEvent")||this.reportStateChanged(i)},componentDidMount:function(){this.shouldUpdateState=!1,this.props.dynamicClientSpecMapAspect.registerReloadSpecMapPlugin(this.props.pageId,function(){this.shouldUpdateState=!0}.bind(this))},reportStateChanged:function(e){this.isCompListensTo(i.STATE_CHANGED)&&this.sendPostMessage({intent:"addEventListener",eventType:"STATE_CHANGED",params:{newState:e}})},isMobileReady:function(){var e=this.getAppData(),i=this.isInMobileDevMode&&this.isInMobileDevMode(),n=this.props.compData,s=t.get(e,"widgets");if(s&&n.widgetId){var r=s[n.widgetId];return r.mobileUrl&&(i||r.mobilePublished)}return e.sectionMobileUrl&&(i||e.sectionMobilePublished)},mutateIframeUrlQueryParam:function(e){return this.props.isViewerMode?(e["section-url"]=this.fixSectionUrl(),e.target="_top"):(e["section-url"]=this.getBaseUrl(),e.target="_self"),e.width=this.state.initialWidth,e},mutateIframeSrc:function(e){return e=this.addStateToUrlObj(e,this.state.sectionUrlState)},addStateToUrlObj:function(e,t){t&&("#"===t.charAt(0)?e.hash=t:(e.path&&"/"!==e.path.slice(-1)&&(e.path+="/"),e.path+=t));return e}}}.apply(t,n))||(e.exports=s)},558:function(e,t,i){var n,s;n=[i(3)],void 0===(s=function(e){"use strict";var t=[],i=1;e.siteAspectsRegistry.registerSiteAspect("tpaPreviewEditorAspect",function(e){"undefined"!=typeof window&&e.registerToMessage(s)});var n=function(e,n,s,r){var a={intent:"TPA_PREVIEW",callId:i++,type:e,compId:s,data:n};return r&&(t[a.callId]=r),a},s=function(e){var i=void 0;try{i=JSON.parse(e.data)}catch(e){return}switch(i.intent){case"TPA_PREVIEW":case"TPA_PREVIEW_RESPONSE":i.callId&&t[i.callId]&&(t[i.callId](i.res),delete t[i.callId])}};return{doPostMessage:function(e,t,i,s){var r=n(e,t,i,s),a=void 0;window.parent.postMessage?a=window.parent:window.parent.document.postMessage&&(a=window.parent.document),a&&void 0!==a&&a.postMessage(JSON.stringify(r),"*")}}}.apply(t,n))||(e.exports=s)},559:function(e,t,i){var n,s;n=[i(2)],void 0===(s=function(e){"use strict";return{propTypes:{compData:e.santaTypesDefinitions.Component.compData.isRequired},getOrigComponentId:function(){return this.props.compData.origCompId}}}.apply(t,n))||(e.exports=s)},560:function(e,t,i){var n;void 0===(n=function(){"use strict";var e={"wysiwyg.viewer.skins.TPAModalSkin":{react:[["div","blockingLayer",[],{}],["div","dialog",[],{role:"dialog",tabIndex:0},["div","frameWrap",[],{},["iframe","iframe",[],{allowFullScreen:!0,frameBorder:0}],["div","errorMessage",[],{}],["button","xButton",[],{title:"Close modal","aria-label":"Close modal"}]]]],params:{rd:"BORDER_RADIUS","bg-block":"BG_COLOR"},paramsDefaults:{rd:"1px","bg-block":"#555"},paramsMutators:{"bg-block":{type:"alpha",value:.75}},css:{"%":"position:fixed;width:100%;height:100%;z-index:100000;","%blockingLayer":"background-color:[bg-block];position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;overflow:hidden;z-index:999;",'%[data-state~="mobile"] %blockingLayer':"display:none;",'%[data-state~="mobile"] %dialog':"position:fixed;top:0;left:0;width:100%;height:100%;margin:0;","%dialog":"position:fixed;top:50%;left:50%;width:200px;height:200px;margin-top:-100px;margin-left:-100px;z-index:1000;","%frameWrap":"overflow:hidden;background:#fff;width:100%;height:100%;position:relative;z-index:1001;border:1px solid #e8e2e2;","%iframe":"position:absolute;width:100%;height:100%;[rd]","%xButton":"position:absolute;z-index:1002;margin-top:4px;right:9px;font-family:courier;font-size:24px;font-weight:bold;cursor:pointer;color:#a1a1a1;","%xButton:hover":"color:#373737;"}},"wysiwyg.viewer.skins.TPAPopupSkin":{react:[["div","frameWrap",[],{},["div","closeButton",[],{}],["iframe","iframe",[],{}]]],params:{shd:"BOX_SHADOW",rd:"BORDER_RADIUS",tdr:"URL"},paramsDefaults:{shd:"4px 4px 15px rgba(0, 0, 0, 0.4)",rd:"3px",tdr:"BASE_THEME_DIRECTORY"},css:{"%":"background:#fff;overflow:hidden;z-index:100000;[shd]  [rd]","%iframe":"position:absolute;width:100%;height:100%;z-index:1000;","%closeButton":"position:absolute;z-index:1001;top:10px;right:10px;cursor:pointer;background:transparent url([tdr]popup_close_x.png) no-repeat right top;height:24px;width:24px;"}},"wysiwyg.viewer.skins.TPAPreloaderSkin":{react:[["div","content",[],{},["div","preloader",[],{}],["span","loadingText",[],{}]]],css:{"%":"position:absolute;top:0;left:0;color:#373737;width:100%;height:100%;","%content":"width:100%;height:100%;"}},"wysiwyg.viewer.skins.TPASectionSkin":{react:[["iframe","iframe",[],{}],["div","overlay",[],{}]],exports:{preloaderOverlay:{skin:"wysiwyg.viewer.skins.TPAPreloaderSkin",styleGroup:"preloaderStyleGroup"},unavailableMessageOverlay:{skin:"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin",styleGroup:"tpaUnavailableMessageOverlaySkinStyleGroup"}},css:{"%iframe":"overflow:hidden;position:absolute;width:100%;height:100%;display:block;",'%[data-state~="iframeNotShown"] %iframe':"display:none;",'%[data-state~="iframeRenderedInvisible"] %iframe':"visibility:hidden;"}},"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin":{react:[["div","content",[],{},["div","iconContainer",[],{},["img","unavailableIcon",[],{}]],["div","textTitle",[],{}],["div","textContainer",[],{},["span","text",[],{}],["a","reloadButton",[],{}],["span","dismissButton",[],{},["a",null,[],{},"Dismiss"]]]]],css:{"%":"position:absolute;top:0;left:0;color:#373737;width:100%;height:100%;","%content":"width:100%;height:100%;background:rgba(255, 255, 255, 0.9);font-size:0;margin-top:5px;","%textContainer":'color:#373737;font-family:"Helvetica Neue", "HelveticaNeueW01-55Roma", "HelveticaNeueW02-55Roma", "HelveticaNeueW10-55Roma", Helvetica, Arial, sans-serif;font-size:14px;display:inline-block;vertical-align:middle;width:100%;margin-top:10px;text-align:center;',"%reloadButton":"display:inline-block;","% a":"color:#0099FF;text-decoration:underline;cursor:pointer;","%iconContainer":"display:none;","%dismissButton":"display:none;","%textTitle":'font-family:"Helvetica Neue", "HelveticaNeueW01-55Roma", "HelveticaNeueW02-55Roma", "HelveticaNeueW10-55Roma", Helvetica, Arial, sans-serif;display:none;','%[data-state~="hideIframe"] %_buttons':"opacity:1;",'%[data-state~="hideOverlay"]':"display:none;"}},"wysiwyg.viewer.skins.TPAWidgetNativeSkin":{react:[],css:{}},"wysiwyg.viewer.skins.TPAWidgetSkin":{react:[["iframe","iframe",[],{}],["div","overlay",[],{}]],exports:{preloaderOverlay:{skin:"wysiwyg.viewer.skins.TPAPreloaderSkin",styleGroup:"preloaderStyleGroup"},unavailableMessageOverlay:{skin:"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin",styleGroup:"tpaUnavailableMessageOverlaySkinStyleGroup"}},css:{"%":"overflow:hidden;","% iframe":"position:absolute;width:100%;height:100%;overflow:hidden;"}}};return e}.apply(t,[]))||(e.exports=n)},89:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i={AUTOPLAY:"autoplay",CAMERA:"camera",MICROPHONE:"microphone",LOCATION:"geolocation",VR:"vr"},n=function(t,i){var n=t.getComponentById(i),s=e.get(n,"props.compData");return n&&s&&t.getSiteData().getClientSpecMapEntry(s.applicationId)},s=function(e){return e.getSiteData().getClientSpecMap()},r=function(e){var t=e&&e.instance.split(".")[1];return t&&JSON.parse(window.atob(t))},a=0,o=function(){0===a&&(a=1e3)};return{Constants:{TPA_PUB_SUB_PREFIX:"TPA_PUB_SUB_",MULTI_SECTION_DELIMITER:"$TPA$",TOP_PAGE_ANCHOR_PREFIX:"TOP_PAGE_",ECOM:{APP_DEF_ID:"1380b703-ce81-ff05-f115-39571d94dfcd",PRODUCT_PAGE_WIDGET_ID:"13a94f09-2766-3c40-4a32-8edb5acdd8bc",GALLERY_WIDGET_ID:"1380bba0-253e-a800-a235-88821cf3f8a4",GRID_GALLERY_WIDGET_ID:"13afb094-84f9-739f-44fd-78d036adb028",CART_ICON_WIDGET_ID:"1380bbc4-1485-9d44-4616-92e36b1ead6b"},SOCIAL_BLOG:{APP_DEF_ID:"14bcded7-0066-7c35-14d7-466cb3f09103",SOCIAL_BLOG_WIDGET_ID:"14c1462a-97f2-9f6a-7bb7-f5541f23caa6",CUSTOM_FEED_WIDGET_ID:"14e5b39b-6d47-99c3-3ee5-cee1c2574c89"}},getCacheKiller:t.urlUtils.persistentCacheKiller,getAppData:n,getAppDataByAppDefinitionId:function(t,i){var n=s(t);return e.find(n,{appDefinitionId:i})},getAppDefId:function(e,t){var i=n(e,t);return i?i.appDefinitionId:null},stripPubSubPrefix:function(e){var t=new RegExp("^TPA_PUB_SUB_");return e.replace(t,"")},addPubSubEventPrefix:function(e){return"TPA_PUB_SUB_".concat(e)},isTPASection:function(t){var i=e.get(t,"props.structure.componentType")||e.get(t,"componentType");return"wysiwyg.viewer.components.tpapps.TPASection"===i||"wysiwyg.viewer.components.tpapps.TPAMultiSection"===i},isGluedWidget:function(t){return"wysiwyg.viewer.components.tpapps.TPAGluedWidget"===(e.get(t,"props.structure.componentType")||e.get(t,"componentType"))},sdkVersionIsAtLeast:function(t,i){t=t||"0.0.0",i=i||"1.41.0";var n=e.map(t.split("."),function(e){return parseInt(e,10)}),s=e.map(i.split("."),function(e){return parseInt(e,10)});return 3===n.length&&3===s.length&&n[0]>=s[0]&&n[1]>=s[1]&&n[2]>=s[2]},getVisitorUuid:function(t){var i=t.cookieUtils.getCookie("_wixUIDX")||"";return i=(i=i.slice(e.lastIndexOf(i,"|")+1)).replace(/^(null-user-id|null)$/g,"")},getInstanceFromClientSpecMap:function(e,t){return r(e[t])},getInstanceFromAppData:r,getClientSpecMap:s,incAppCounter:function(){++a},decAppCounter:function(e,t){--a,o(e,t)},reportAppCounter:o,isPageMarkedAsHideFromMenu:function(t,i){if(t&&i){e.includes(i,"$TPA$")&&(i=i.substr(0,i.indexOf("$TPA$")));var n=e.find(t.widgets,function(t){return e.get(t,"appPage.id")===i});return!!n&&e.get(n,"appPage.hideFromMenu")}return!1},getDebuggingParamsFromUrl:function(t){var i={},n=e.get(t,"query.petri_ovr");n&&(i.petri_ovr=n);var s=e.get(t,"query.debugApp");return s&&(i.debugApp=s),i},appendProtocolToUrlIfNeeded:function(i,n){if(!/^https?/.test(i)){var s=e.get(n,"protocol","http:");return t.urlUtils.addProtocolIfMissing(i,s)}return i},getIFramePermissions:function(){return e(i).values().join("; ")},isBlog:function(e){return"14bcded7-0066-7c35-14d7-466cb3f09103"===e.getAppData().appDefinitionId},isEcom:function(e){return"1380b703-ce81-ff05-f115-39571d94dfcd"===e.getAppData().appDefinitionId}}}.apply(t,n))||(e.exports=s)},9:function(e,t){e.exports=a},90:function(e,t,i){var n,s;n=[i(2),i(0),i(89),i(551),i(553)],void 0===(s=function(e,t,i,n,s){"use strict";var r=function(e,t){return e.mutateIframeUrlQueryParam&&(t=e.mutateIframeUrlQueryParam(t)),t};return{propTypes:{id:e.santaTypesDefinitions.Component.id.isRequired,isViewerMode:e.santaTypesDefinitions.isViewerMode,isGoogleBot:e.santaTypesDefinitions.isGoogleBot,componentViewMode:e.santaTypesDefinitions.RenderFlags.componentViewMode,languageCode:e.santaTypesDefinitions.RendererModel.languageCode,compData:e.santaTypesDefinitions.Component.compData.isRequired,rootId:e.santaTypesDefinitions.Component.rootId,viewerSessionId:e.santaTypesDefinitions.viewerSessionId,currentUrl:e.santaTypesDefinitions.currentUrl.isRequired,aspectData:e.santaTypesDefinitions.TPA.data,isExperimentOpen:e.santaTypesDefinitions.isExperimentOpen,currentLanguage:e.santaTypesDefinitions.RendererModel.multilingual.currentLanguage,originalLanguage:e.santaTypesDefinitions.RendererModel.multilingual.originalLanguage,currency:e.santaTypesDefinitions.RendererModel.currency,timeZone:e.santaTypesDefinitions.RendererModel.timeZone},getInitialState:function(){this.viewMode=this.getViewMode()},getViewMode:function(){return this.props.isViewerMode?"site":this.props.componentViewMode},buildUrl:function(e,a){e=function(e){if(this.props.isGoogleBot){var n=t.get(this,"props.compData.widgetId");if(i.isEcom(this)){if(this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV1")){if(n===i.Constants.ECOM.PRODUCT_PAGE_WIDGET_ID)return"https://www.quick-ecom.com/product/{instanceId}";if(!n||n===i.Constants.ECOM.GALLERY_WIDGET_ID||n===i.Constants.ECOM.GRID_GALLERY_WIDGET_ID)return"https://www.quick-ecom.com/gallery/{instanceId}/{compId}"}else if(this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV2")){if(n===i.Constants.ECOM.PRODUCT_PAGE_WIDGET_ID)return"https://{instanceId}.quick-ecom.com/product";if(!n||n===i.Constants.ECOM.GALLERY_WIDGET_ID||n===i.Constants.ECOM.GRID_GALLERY_WIDGET_ID)return"https://{instanceId}.quick-ecom.com/gallery/{compId}"}}else if(i.isBlog(this)&&this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV1")){if(n===i.Constants.SOCIAL_BLOG.CUSTOM_FEED_WIDGET_ID)return"https://social-blog.wixapps.net/custom-feed-widget/{instanceId}";if(!n||n===i.Constants.SOCIAL_BLOG.SOCIAL_BLOG_WIDGET_ID)return"https://social-blog.wixapps.net/{instanceId}"}}return e}.call(this,e),e=i.appendProtocolToUrlIfNeeded(e,this.props.currentUrl);var o=this.getAppData(this),p=this.props.id;e=function(e,n,s){var r=e;if(t.includes(e,"{instanceId}")){var a=n.instanceId;a||(a=i.getInstanceFromAppData(n).instanceId),r=t.replace(r,new RegExp("{instanceId}","g"),a)}return t.includes(e,"{compId}")&&(r=t.replace(r,new RegExp("{compId}","g"),s)),r}(e,o,p);var c=this.state.initialHeight?this.state.initialHeight.toString():void 0,l=t.get(this.props,"currentLanguage.languageCode"),d=this.props.isViewerMode?t.get(this.props,"originalLanguage.languageCode"):t.get(this.props,"originalLanguage.code"),u=t.get(this.props,"currentLanguage.locale"),h=void 0;l&&d&&(h=d===l);var g,m,f,y=new n(e);if(this.props.isExperimentOpen("sv_tpaUrlWithNoQueryParams")&&this.props.isGoogleBot&&(g=this,m=t.get(g,"props.compData.widgetId"),f=t.isUndefined(m),i.isEcom(g)?f||t.includes([i.Constants.ECOM.PRODUCT_PAGE_WIDGET_ID,i.Constants.ECOM.GALLERY_WIDGET_ID,i.Constants.ECOM.GRID_GALLERY_WIDGET_ID],m):i.isBlog(g)?f||t.includes([i.Constants.SOCIAL_BLOG.SOCIAL_BLOG_WIDGET_ID,i.Constants.SOCIAL_BLOG.CUSTOM_FEED_WIDGET_ID],m):void 0)?y.addDeviceType(this.getDeviceType(this)).addCompId(p).addViewMode(this.viewMode).addStandalone("true"):y.addCompId(p).addDeviceType(this.getDeviceType(this)).addInstance(this.state.initialInstance).addLocale(this.props.languageCode).addViewMode(this.viewMode).addCacheKiller(i.getCacheKiller()).addExternalId(this.props.compData.referenceId).addPageId(this.props.rootId).addHeight(c).filterQueryParams(a).addMultipleQueryParams(function(){var e=t.get(this.props,"aspectData.queryParams",{});return e=t.merge(e,r(this,e)),e=t.merge(e,i.getDebuggingParamsFromUrl(this.props.currentUrl)),e=t.merge(e,this.state.sectionUrlParams),this.getEcomParams&&this.getEcomParams()&&(e["ecom-tpa-params"]=this.getEcomParams()),e}.call(this)).addViewerSessionId(this.props.viewerSessionId).addRouterData(this.state.initialRouterData,this.props.isExperimentOpen).addLang(l).addDateNumberFormat(u).addIsPrimaryLanguage(t.toString(h)).addCurrency(this.props.currency).addTimeZone(this.props.timeZone),this.props.isGoogleBot&&(this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV1")||this.props.isExperimentOpen("sv_tpaReplaceEcomEndpointForSeoV2"))&&this.props.tpaComponentsDomAspect){var v=this.props.tpaComponentsDomAspect.aspectSiteApi.getSiteAPI(),S=s.mapPageToWidgets(v),I=this.props.compData.applicationId;if(!t.isEmpty(S)&&S[I]){var T=S[I],D=t.find(T,{tpaPageId:"product_page"});if(D){var w=D.pageId,C=v.getPageUrlFor(w);y.addQueryParam("productPageUrl",C),y.addStandalone("true")}}}return this.mutateIframeSrc&&y.mutateIframeSrc(this.mutateIframeSrc),y.build()}}}.apply(t,n))||(e.exports=s)},91:function(e,t,i){var n,s;n=[i(2),i(0),i(11),i(321)],void 0===(s=function(e,t,i,n){"use strict";return{propTypes:{id:e.santaTypesDefinitions.Component.id.isRequired,clientSpecMap:e.santaTypesDefinitions.RendererModel.clientSpecMap.isRequired,compData:e.santaTypesDefinitions.Component.compData.isRequired,isMobileView:e.santaTypesDefinitions.isMobileView,sendPostMessage:e.santaTypesDefinitions.TPA.sendPostMessage.isRequired,windowScrollEvent:e.santaTypesDefinitions.SiteAspects.windowScrollEvent.isRequired,windowKeyboardEvent:e.santaTypesDefinitions.SiteAspects.windowKeyboardEvent.isRequired,svSessionChangeEvent:e.santaTypesDefinitions.SiteAspects.svSessionChangeEvent.isRequired,deleteCompListeners:e.santaTypesDefinitions.TPA.deleteCompListeners.isRequired,siteMetadataChangeAspect:e.santaTypesDefinitions.SiteAspects.siteMetadataChangeAspect.isRequired,tpaPageNavigationAspect:e.santaTypesDefinitions.SiteAspects.tpaPageNavigationAspect.isRequired,dynamicClientSpecMapAspect:e.santaTypesDefinitions.SiteAspects.dynamicClientSpecMapAspect.isRequired,registerToMemberDetailsChange:e.santaTypesDefinitions.SiteMembersSantaTypes.registerToMemberDetailsChange.isRequired,unRegisterMemberDetailsChange:e.santaTypesDefinitions.SiteMembersSantaTypes.unRegisterMemberDetailsChange.isRequired},isEventSupported:function(e){return!!n[e]},isCompListensTo:function(e){return t.includes(this.state.registeredEvents,e)},getAppData:function(){return this.props.clientSpecMap[this.props.compData.applicationId]||{}},getDeviceType:function(){return this.props.isMobileView?"mobile":"desktop"},sendPostMessage:function(e){this.props.sendPostMessage(this,e)},getIframe:function(){return this.refs.iframe&&i.findDOMNode(this.refs.iframe)},startListen:function(e){if(this.isEventSupported(e)&&(this.setState({registeredEvents:this.state.registeredEvents.concat(e)}),this.props))switch(e){case n.PAGE_NAVIGATION:case n.PAGE_NAVIGATION_IN:case n.PAGE_NAVIGATION_OUT:case n.PAGE_NAVIGATION_CHANGE:this.props.tpaPageNavigationAspect.registerToPageChanged(this,e);break;case n.SCROLL:this.props.windowScrollEvent.registerToScroll(this);break;case n.SESSION_CHANGED:this.props.svSessionChangeEvent.registerToSessionChanged(this);break;case n.INSTANCE_CHANGED:this.props.dynamicClientSpecMapAspect.registerToInstanceChanged(this);break;case n.MEMBER_DETAILS_UPDATED:this.props.registerToMemberDetailsChange(this);break;case n.SITE_METADATA_CHANGED:this.props.siteMetadataChangeAspect.registerToSiteMetadataChange(this);break;case n.KEY_DOWN:this.props.windowKeyboardEvent.registerToKeyDown(this);break;case n.KEY_UP:this.props.windowKeyboardEvent.registerToKeyUp(this)}},stopListen:function(e){if(this.setState({registeredEvents:t.without(this.state.registeredEvents,e)}),this.props)switch(e){case n.PAGE_NAVIGATION:case n.PAGE_NAVIGATION_IN:case n.PAGE_NAVIGATION_OUT:case n.PAGE_NAVIGATION_CHANGE:this.props.tpaPageNavigationAspect.unregisterToPageChanged(this);break;case n.SCROLL:this.props.windowScrollEvent.unregisterToScroll(this,e);break;case n.SESSION_CHANGED:this.props.svSessionChangeEvent.unRegisterToSessionChanged(this);break;case n.INSTANCE_CHANGED:this.props.dynamicClientSpecMapAspect.unRegisterToInstanceChanged(this);break;case n.MEMBER_DETAILS_UPDATED:this.props.unRegisterMemberDetailsChange(this);break;case n.SITE_METADATA_CHANGED:this.props.siteMetadataChangeAspect.unRegisterToSiteMetadataChange(this);break;case n.KEY_DOWN:this.props.windowKeyboardEvent.unRegisterKeyDown(this);break;case n.KEY_UP:this.props.windowKeyboardEvent.unRegisterKeyUp(this)}},setSiteMemberDataState:function(e){this.setState({shouldGetSiteMemberDetails:e})},hasOrigComponent:function(){return!t.isUndefined(this.props.compData.origCompId)},componentWillUnmount:function(){var e=this.props.id,i=this.getAppData().appDefinitionId;this.props.deleteCompListeners(i,e),t.forEach(t.get(this.state,"registeredEvents",[]),function(e){this.stopListen(e)}.bind(this))}}}.apply(t,n))||(e.exports=s)}})});
//# sourceMappingURL=tpaComponents.min.js.map